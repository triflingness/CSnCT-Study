# 프로세스 유틸리티(1)

### 1️⃣ 프로세스 관련 명령어

(1) **ps(process status)**

- 현재 실행 중인 프로세스의 상태를 보여주는 명령어이다.
- cpu 사용도가 낮은 순서로 출력한다.
- 형식: **ps [옵션]**
- 옵션 없이 명령어 ‘ps’를 실행하면 자신의 터미널에서 실행되고 있는 프로세스들의 관련 정보만 나타낸다.
- 상태
    - PID : 프로세스 식별번호
    - TTY : 프로세스와 연결된 터미널 번호
    - TIME : 총 CPU 사용 시간
    - CMD : 실행 명령
- 옵션
    - a : 현재 실행 중인 모든 프로세스 출력
    - e : 모든 프로세스 정보
    - u : 사용자 이름과 프로세스 시작 시간 출력
    - x : 접속된 터미널뿐만 아니라 사용되고 있는 모든 프로세스들을 출력
    - l  : 자세한 정보 출력
- 명령어 ‘ps’와 ‘grep’을 이용하여 특정 프로세스의 상태 정보를 확인할 수 있다. 
명령어 ‘ps ax | grep httpd’는 httpd 프로세스들의 상태를 나타낸다.
- 명령어 ‘ps aux’를 수행한 결과 상태
    - USER : 프로세스 소유자명, 계정명
    - PID : 프로세스 식별 번호
    - %CPU : CPU 사용 비율의 추정치
    - %MEM : 메모리 사용 비율의 추정치
    - VSZ : 페이지 단위의 가상 메모리 사용량
    - PSS : 실제 사용된 메모리량(Resident Set Size)
    - TTY : 프로세스와 연결된 터미널 번호
    - STAT : 현재 프로세스 상태
        - P : 수행 가능/수행 중
        - R : 현재 실행 상태
        - S : 잠든 상태, 20초 이상 된 상태
        - D : I/O 작업이 끝나기를 기다리며 정지된 상태
        - T : 정지된 상태(suspend), 일시 정지 상태
        - Z : 좀비 프로세스, 작업 종료 후 부모 프로세스로부터 회수되지 않아 메모리에 적재되어 있는 상태
    - START : 프로세스 시작 시간
    - TIME : 총 CPU 시작 시간
    - COMMEND : 실행 명령
- 좀비 프로세스는 kill 시그널을 받아도 종료되지 않는다.
    - 이미 현재 프로세스에 대한 모든 정보가 메모리에서 사라졌음에도 부모 프로세스가 정상적인 종료 처리를 하지 못해 발생한다.
- 명령어 ‘ps -l’를 수행한 결과 상태
    - F : 프로세스 플래그로 8진수 값의 합을 나타냄
    - S : 프로세스 상태를 표시
    - UID : 프로세스 소유자의 USERNAME
    - PPID : 부모 프로세스 PID
    - C : 짧은 시간 동안의 CPU 사용률
    - PRI : 실행 우선순위 값, 값이 작을수록 우선순위가 높음
    - NI : NICE 우선순위를 계산할 때 사용되는 NICE 값
    - ADDR : 프로세스의 주기억장치 내의 주소
    - SZ : 프로세스 크기로 단위는 블록
    - WCHAN : 프로세스가 대기나 수명 상태에서 기다리는 사건, 기다리는 사건이 실행될 주기억장치 내의 주소를 가리킴, 실행 중인 프로세스는 공백
- NICE 값으로 프로세스의 실행 우선순위를 설정한다→ 실행 우선 순위가 낮은 프로세스보다 더 많은 시스템 자원을 할당하게 되므로 실행 속도가 빨라지게 된다.

(2) **pstree**

- 실행 중인 프로세스들을 트리 구조로 나타낸다.
- 형식 : **pstree [옵션]**
- 옵션
    - -p : 프로세스 ID 표시
    - -n : 프로세스 ID를 정렬해서 표시
    - -a : 명령행 인자를 포함한 정보를 트리 구조에 표시
    - -h : 현재 프로세스와 해당 프로세스의 부모 프로세스를 음영으로 강조해서 표시

(3) **jobs**

- 작업이 중지된 상태, 백그라운드로 진행 중인 상태, 변경되었지만 보고되지 않은 상태 등을 표시한다.
- 형식 : jobs [옵션][작업번호]
- 옵션
    - -l : 프로세스 그룹 ID를 state 필드 앞에 표시
    - -n : 프로세스 그룹 중 대표 프로세스 ID 표시
    - -p : 프로세스 ID를 한 행 씩 표시
- [숫자] : 작업 번호
- + 는 현재 작업 실행, - 는 대기 상태 작업을 나타낸다.
- 작업의 상태값
    - Running : 작업이 일시 중단되지 않았고 종료하지 않고 계속 진행 중
    - Stopped : 작업이 일시 중단
    - Done : 작업이 완료되어 0을 반환하고 종료
    - Done(code) : 작업이 정상적으로 완료되었으며, 0이 아닌 코드를 반환
    

(4) **bg와 fg**

<froeground에서 background로의 전환>

- **bg** :  현재 실행 중인 프로세스를 백그라운드 작업으로 전환
- 형식 : **bg %작업번호** 또는 **bg 작업번호**
- 먼저 실행 중인 작업을 일시 중지(ctrl+z)한 후 bg 명령을 수행한다.
- 백그라운드 작업으로 명령어를 실행할 때 명령어 뒤에 ‘&’를 붙인다.

<background에서 froeground로의 전환>

- **fg** : 현재 백그라운드로 실행 중인 명령어를 포그라운드 작업으로 전환
- 형식 : **fg %작업번호** 또는 **fg 작업번호**
- 작업 번호를 지정하지 않을 시 현재 수행 중인 작업을 포그라운드로 전환한다.
- 포그라운드 작업 종료 : ctrl+c

(5) **kill** 

- 프로세스 종료
- 형식 : kill [옵션][시그널 번호 or 시그널 이름][PID or %작업번호]
- 옵션
    - -l : 시그널 종류 나열
    - -s 시그널 번호 : 전달할 시그널의 종류를 지정
    - -1 : -HUP, 프로세스 재시작
    - -9 : 프로세스 강제 종료
